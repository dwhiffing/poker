(this.webpackJsonppoker=this.webpackJsonppoker||[]).push([[0],{1164:function(e,t,n){},1173:function(e,t){},1187:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),i=n(11),l=n(2),u=n(12),s=n(1215),m=n(1219),d=n(1221),f=n(33),b=n.n(f),E=function(e){var t=e.variant,n=e.flex,a=void 0===n?1:n,c=e.children,o=e.style,i=void 0===o?{}:o,s=Object(l.a)(e,["variant","flex","children","style"]),d={display:"flex",flex:a};return/column/.test(t)&&(d.flexDirection="column"),/justify-between/.test(t)&&(d.justifyContent="space-between"),/align-center/.test(t)?d.alignItems="center":/justify-center/.test(t)?d.justifyContent="center":/center/.test(t)&&(d.justifyContent="center",d.alignItems="center"),r.a.createElement(m.a,Object.assign({style:Object(u.a)({},d,{},i)},s),c)};function p(e){var t=e.amount,n=Object(l.a)(e,["amount"]);return r.a.createElement(d.a,Object.assign({},n,{label:b()(t).format("(0[.]00a)").toUpperCase()}))}function v(e){var t=e.room,n=e.blind,a=e.currentTurn,c=e.currentBet,o=e.players,i=o.find((function(e){return e.id===t.sessionId}))||{},l=a===t.sessionId,m=o.filter((function(e){return e.inPlay})),d=o.filter((function(e){return e.seatIndex>-1})).length,f=i.dealer&&d>=2&&0===m.length,b=-1!==i.seatIndex,p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.send(Object(u.a)({action:e},n))};return r.a.createElement(r.a.Fragment,null,(l||f)&&r.a.createElement(x,{canDeal:f,currentBet:c,betAmount:2*n,player:i,sendAction:p,canMove:l}),r.a.createElement(E,{flex:0,justifyContent:"flex-end",position:"fixed",top:10,left:0,right:0,zIndex:100},r.a.createElement(s.a,{onClick:function(){b?p("stand"):(localStorage.removeItem(t.id),t.leave())}},b?"Stand":"Leave")))}var h=function(e){var t=e.variant,n=void 0===t?"contained":t,a=Object(l.a)(e,["variant"]);return r.a.createElement(s.a,Object.assign({variant:n},a,{style:{margin:8}}))};function x(e){var t=e.canDeal,n=e.sendAction,c=e.currentBet,o=void 0===c?0:c,i=e.player,l=e.canMove,u=e.betAmount,s=e.autoDeal,m=void 0!==s&&s,d=e.autoCheck,f=void 0!==d&&d;return Object(a.useEffect)((function(){t&&m&&n("deal")}),[t,n,m]),Object(a.useEffect)((function(){0===i.money&&0===o&&f&&setTimeout((function(){n("check")}),500)}),[i,f,n,o]),r.a.createElement(E,{flex:0,variant:"justify-center",position:"fixed",bottom:10,left:0,right:0},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{disabled:!t,onClick:function(){return n("deal")}},"Deal")):r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{disabled:!l,onClick:function(){return n(o>i.bet?"fold":"check")}},o>i.bet?"Fold":"Check"),r.a.createElement(h,{disabled:!l||i.money+i.bet<o||o===i.bet,onClick:function(){return n("call")}},"Call"),r.a.createElement(h,{disabled:!l||i.money+i.bet<o+u,onClick:function(){return n("bet",{amount:o+u})}},o>0?"Raise":"Bet")))}var y=["spades","clubs","hearts","diamonds"],g=function(e){var t=e.card,n=e.x,a=void 0===n?0:n,c=e.y,o=void 0===c?0:c,i=e.scale,l=void 0===i?1:i,s=e.style,m=void 0===s?{}:s,d=["card",t&&"rank".concat(t.value),!t.value&&"finished",t&&y[t.suit]];return r.a.createElement("div",{className:d.join(" "),style:Object(u.a)({transform:"translate3d(".concat(a,"px, ").concat(o,"px, 0px) scale(").concat(l,")")},m)},r.a.createElement("div",{className:"face"}),r.a.createElement("div",{className:"back"}))},j=n(1216),O=n(16),I=n.n(O),k=n(26),w=n(64),C=function(){var e=Object(k.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=localStorage.getItem(t))){e.next=10;break}return e.prev=2,e.next=5,window.colyseus.reconnect(t,a);case 5:n=e.sent,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:if(e.t1=n,e.t1){e.next=15;break}return e.next=14,window.colyseus.joinById(t);case 14:e.t1=e.sent;case 15:return n=e.t1,e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e,t){localStorage.setItem("name",t),localStorage.setItem(e.id,e.sessionId)},W=function(){return document.documentElement.clientWidth<=500||document.documentElement.clientHeight<=500},A=["s","c","h","d"],z=[0,"A","2","3","4","5","6","7","8","9","10","J","Q","K"],H=function(e,t){if(0===t.length)return"";var n=t.map((function(e){return"".concat(z[e.value]).concat(A[e.suit])})),a=e.cards.map((function(e){return"".concat(z[e.value]).concat(A[e.suit])})).concat(n);return w.Hand.solve(a).descr},B=function(){return document.documentElement.clientWidth<document.documentElement.clientHeight},N=function(e){var t=e.onSit,n=e.getPlayer,a=e.index,c=e.style,o=void 0===c?{}:c,i=n(a)||{},l=i.id,f=i.remainingConnectionTime,v=i.remainingMoveTime,h=i.connected,x=i.isTurn,y=i.isClient,g=i.name,O=i.winner,I=i.inPlay,k=i.bet,w=void 0===k?0:k,C=i.money,S=i.hand,W=i.showCards,A=i.cards,z=i.dealer,H="#54b786";return x&&(H="#8dd2b0"),l&&!h&&(H="#d86e6e"),O&&(H="#00fff3"),r.a.createElement(E,{position:"relative",variant:"center"},r.a.createElement(E,{flex:0,mx:1,variant:"center",borderRadius:12,minWidth:document.documentElement.clientWidth<400?64:83,position:"relative",py:1,style:Object(u.a)({border:"3px solid ".concat(F[a]),backgroundColor:H,zIndex:10},o)},l?r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{variant:"column center"},r.a.createElement(j.a,{style:{fontSize:y?14:12,textAlign:"center",fontWeight:y?"bold":"normal"}},g||l),r.a.createElement(j.a,{style:{fontSize:12}},"$",b()(C).format("(0[.]00a)").toUpperCase())),w>0&&r.a.createElement(m.a,{position:"absolute",bottom:-25,zIndex:99},r.a.createElement(p,{amount:w})),z&&r.a.createElement(D,null),x&&r.a.createElement(T,{time:h?v:f}),I&&w<=0&&W&&S&&r.a.createElement(m.a,{position:"absolute",bottom:-23,zIndex:66},r.a.createElement(d.a,{label:S}))):r.a.createElement(s.a,{disabled:!t,onClick:function(){return t(a)}},"Sit")),A&&r.a.createElement(R,{big:y||W,cards:A}))};function R(e){var t=e.big,n=e.cards,a=W()?-15:-20,c=t?1:.7;return r.a.createElement(m.a,{position:"absolute",display:"flex",justifyContent:"center",zIndex:1},n.map((function(e,n){return r.a.createElement(m.a,{key:"card-".concat(n),width:0===n?15:null},r.a.createElement(g,{key:n,card:e,scale:W()?.9*c:c,y:a,style:{position:"relative",zIndex:t?10:1}}))})))}function T(e){var t=e.time;return r.a.createElement(m.a,{display:"flex",justifyContent:"center",alignItems:"center",width:30,height:30,borderRadius:15,position:"absolute",right:-20,style:{zIndex:300,boxShadow:"rgba(0,0,0,0.5) 0px 0px 3px",backgroundColor:"white",color:"green"}},t)}function D(){return r.a.createElement(m.a,{display:"flex",justifyContent:"center",alignItems:"center",width:30,height:30,borderRadius:15,position:"absolute",right:-20,style:{zIndex:300,boxShadow:"rgba(0,0,0,0.5) 0px 0px 3px",backgroundColor:"white",color:"green"}},"D")}var F=["#0071AA","#ECE4B7","#E8C340","#D33830","#A06033","#EA9438","#E27C81","#7FC12E","#525252","#AA5BAF"],P=function(e){var t=e.pot,n=e.layout,a=e.room,c=e.cards,o=e.onSit,i=e.players,l=function(e){return i.map((function(e){return Object(u.a)({},e,{hand:H(e,c),isClient:e.id===a.sessionId})})).find((function(t){return t.seatIndex===e}))};return r.a.createElement(E,{variant:"column justify-between",width:"100%",maxWidth:1100,maxHeight:500},r.a.createElement(E,null,document.documentElement.clientHeight>400&&document.documentElement.clientWidth>500&&r.a.createElement(E,null),n[0].map((function(e){return r.a.createElement(N,{key:"seat-".concat(e),index:e,getPlayer:l,onSit:o})})),document.documentElement.clientHeight>400&&document.documentElement.clientWidth>500&&r.a.createElement(E,null)),r.a.createElement(E,{flex:2},n[1].length>0&&r.a.createElement(E,{variant:"column"},n[1].map((function(e){return r.a.createElement(N,{key:"seat-".concat(e),index:e,getPlayer:l,onSit:o})}))),r.a.createElement(E,{variant:"column center",minHeight:document.documentElement.clientWidth<500?350:0,flex:2},r.a.createElement(m.a,{minHeight:100,minWidth:150,display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},document.documentElement.clientHeight<=400&&t>0&&r.a.createElement(m.a,{zIndex:99},r.a.createElement(p,{amount:t})),c.map((function(e,t){return r.a.createElement(g,{key:e.index,card:e,scale:1,style:{margin:5}})}))),document.documentElement.clientHeight>400&&document.documentElement.clientWidth>400&&t>0&&r.a.createElement(m.a,{zIndex:99},r.a.createElement(p,{amount:t}))),n[2].length>0&&r.a.createElement(E,{variant:"column"},n[2].map((function(e){return r.a.createElement(N,{key:"seat-".concat(e),index:e,getPlayer:l,onSit:o})})))),r.a.createElement(E,null,document.documentElement.clientHeight>400&&document.documentElement.clientWidth>500&&r.a.createElement(E,null),n[3].map((function(e){return r.a.createElement(N,{key:"seat-".concat(e),index:e,getPlayer:l,onSit:o})})),document.documentElement.clientHeight>400&&document.documentElement.clientWidth>500&&r.a.createElement(E,null)))};function J(e){var t=e.pot,n=void 0===t?0:t,c=e.players,o=e.room,l=e.cards,s=Object(a.useState)(B()),m=Object(i.a)(s,2),d=m[0],f=m[1],b=c.find((function(e){return e.id===o.sessionId}))||{},E=c.filter((function(e){return-1!==e.seatIndex})).map((function(e){return Object(u.a)({},e,{isClient:e.id===o.sessionId})})).sort((function(e,t){return e.seatIndex-t.seatIndex})),p=-1===b.seatIndex?function(e){return o.send({action:"sit",seatIndex:e})}:null;return Object(a.useEffect)((function(){var e=function(){return f(B())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),r.a.createElement(P,{layout:document.documentElement.clientHeight<=320?b.seatIndex>=4?K:U:d?L:M,cards:l,onSit:p,room:o,pot:n,currentPlayer:b,players:E})}var L=[[0,1],[9,8,7],[2,3,4],[6,5]],M=[[0,1,2],[9,8],[3,4],[7,6,5]],U=[[0,1,2,3,4],[],[],[9,8,7,6,5]],K=[[9,8,7,6,5],[],[],[0,1,2,3,4]],Q=n(1217),$=n(65),q=n.n($),G=n(66),V=n.n(G);function X(e){var t=e.setRoom,n=Object(a.useState)([]),c=Object(i.a)(n,2),o=c[0],l=c[1],u=Object(a.useState)(localStorage.getItem("name")||q.a.name.firstName()),m=Object(i.a)(u,2),d=m[0],f=m[1],b=Object(a.useRef)(),p=Object(a.useRef)(!1),v=Object(a.useCallback)(function(){var e=Object(k.a)(I.a.mark((function e(n){var a,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=prompt("Room name?"),e.next=3,window.colyseus.create("poker",{roomName:a});case 3:r=e.sent,S(r,n),r.send({action:"setName",name:n}),r.send({action:"sit"}),t(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),h=Object(a.useCallback)(function(){var e=Object(k.a)(I.a.mark((function e(n,a){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(n);case 2:if(r=e.sent){e.next=6;break}return alert("Failed to join room"),e.abrupt("return");case 6:S(r,a),r.send({action:"setName",name:a}),r.send({action:"sit"}),t(r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),x=Object(a.useCallback)(Object(k.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.colyseus.getAvailableRooms();case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)}))),[]);return Object(a.useEffect)((function(){return x(),b.current=setInterval(x,3e3),function(){return clearInterval(b.current)}}),[x]),Object(a.useEffect)((function(){if(o){var e=o.find((function(e){return localStorage.getItem(e.roomId)}));e&&!p.current&&(p.current=!0,h(e.roomId,d))}}),[o,h,d]),r.a.createElement(E,{variant:"column center",style:{height:"100vh"}},r.a.createElement(Q.a,{placeholder:"Enter name",value:d,onChange:function(e){return f(V()(e.target.value,{length:10,omission:""}))},style:{marginBottom:20}}),r.a.createElement(j.a,{variant:"h5"},"Available Tables:"),r.a.createElement(E,{flex:0,variant:"column center",style:{minHeight:200}},0===o.length&&r.a.createElement(Z,null),o.map((function(e){return r.a.createElement(Y,{key:e.roomId,room:e,onClick:function(){return h(e.roomId,d)}})}))),r.a.createElement(s.a,{variant:"contained",onClick:function(){return v(d)}},"Create room"))}var Y=function(e){var t=e.room,n=e.onClick;return r.a.createElement(m.a,null,r.a.createElement(j.a,{style:{cursor:"pointer",textDecoration:"underline"},onClick:n},t.metadata.roomName||t.roomId))},Z=function(){return r.a.createElement(j.a,null,"No rooms available")};n(1164);var _=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),s=l[0],m=l[1],d=Object(a.useState)([]),f=Object(i.a)(d,2),b=f[0],p=f[1],h=Object(a.useState)(),x=Object(i.a)(h,2),y=x[0],g=x[1],j=Object(a.useState)(0),O=Object(i.a)(j,2),I=O[0],k=O[1],w=Object(a.useState)(0),C=Object(i.a)(w,2),S=C[0],W=C[1],A=Object(a.useState)(),z=Object(i.a)(A,2),H=z[0],B=z[1];return Object(a.useEffect)((function(){n&&(n.onLeave((function(){c(null),p([]),g(),m([])})),n.state.onChange=function(e){return e.forEach((function(e){var t=e.field,a=e.value;"cards"===t?m(a.toJSON()):"currentTurn"===t?g(a):"pot"===t?B(a):"blind"===t?W(a):"currentBet"===t?k(a):"players"===t&&p(a.toJSON().map((function(e){return t=e,a=n.sessionId,Object(u.a)({},t,{cards:t.id===a||t.showCards?t.cards:t.cards.map((function(e){return{}}))});var t,a})))}))})}),[n]),n?(console.log({pot:H,cards:s,players:b,currentTurn:y}),r.a.createElement(E,{variant:"column center",overflow:"hidden",style:{width:document.documentElement.clientWidth>400?"calc(100vw - 20px)":"100vw",height:"calc(100vh - 60px)",padding:document.documentElement.clientWidth>400?"30px 10px":"30px 0"}},r.a.createElement(J,{pot:H,room:n,cards:s,players:b}),r.a.createElement(v,{room:n,blind:S,currentBet:I,currentTurn:y,players:b}))):r.a.createElement(X,{setRoom:c})},ee=n(67);window.colyseus=new ee.Client("wss://daniel-poker.herokuapp.com"),o.a.render(r.a.createElement(_,null),document.getElementById("root"))},76:function(e,t,n){e.exports=n(1187)}},[[76,1,2]]]);
//# sourceMappingURL=main.14fc0cda.chunk.js.map